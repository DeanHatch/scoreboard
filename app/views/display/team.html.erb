<h1><%= @team.name %></h1>
<h2><%= @team.grouping.fullname %></h2>

<h3>Standings</h3>
<table class="standings">
  <thead>
    <tr>
      <th>Team</th>
      <%= raw(@competition.result_headings.collect{|rh| raw(content_tag(:th, rh))}.join(" ") ) %>
    </tr>
  </thead>

 <tbody>
      <!-- Show sorted, unique Teams -->
    <% @groupingteams.sort{ |a,b| a.name <=> b.name }.each do |team| %>
      <tr>
        <td><%= link_to team.name, rustydog_path(@competition.id, team.id) %></td>
      <%= raw(team.result_row(@competition).collect{|rr| raw(content_tag(:td, rr))}.join(" ") ) %>
      </tr>
    <% end %>
  </tbody>
</table>

<p>
<% raw(Contest.all.collect{|c| [c.type, c.id, c.homecontestant, c.awaycontestant]}.inspect()) %>
</p>

<h3>Scores</h3>
<table class="schedule">
  <thead>
    <tr>
      <th>Date</th>
      <th> </th>
      <th>Score</th>
      <th>Opponent</th>
      <th>Location</th>
    </tr>
  </thead>

  <tbody>
      <!-- Show sorted, unique Teams -->
    <% @contestants.select{|c| c.contest.has_score?}.each do |c| cntst = Contest.find(c.contest_id) %>
      <tr>
        <td><%= cntst.display_date %></td>
        <td><%= c.win ? "W" : (c.loss ? "L" : "D") %></td>
        <td><%= c.score %> - 
	      <%= c.opponent.score %></td>
        <td><%= c.homeaway=='H' ? "vs" : "at" %>
	      <%= c.opponent.fullname %></td>
        <td><%= cntst.venue_name %></td>
      </tr>
    <% end %>
  </tbody>
</table>


<h3>Schedule</h3>
<table class="schedule">
  <thead>
    <tr>
      <th>Team Name</th>
      <th>Date</th>
      <th>Time</th>
      <th>Location</th>
      <th>Opponent</th>
    </tr>
  </thead>

  <tbody>
      <!-- Show sorted, unique Teams -->
    <% @contestants.select{|c| c.contest.needs_score?}.each do |c| cntst = Contest.find(c.contest_id) %>
      <tr>
         <td><%= c.fullname %></td>
        <td><%= cntst.display_date %></td>
        <td><%= cntst.display_time %></td>
        <td><%= cntst.venue_name %></td>
        <td><%= c.homeaway=='H' ? "vs" : "at" %>
	      <%= c.opponent.fullname %></td>
      </tr>
    <% end %>
  </tbody>
</table>

