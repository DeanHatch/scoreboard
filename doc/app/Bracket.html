<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Bracket - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="Object.html">Object</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-all_for">::all_for</a>
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-numrounds">#numrounds</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Bracket">
  <h1 id="class-Bracket" class="class">
    class Bracket
  </h1>

  <section class="description">
    
<p>This class facilitates the display of <a href="Bracket.html">Bracket</a>
contests, visually linking them together so that the advancement of winners
is clearly obvious. In order to achieve this result, this class acts as a
container for a number of <a href="Bracketpairing.html">Bracketpairing</a>
objects. This container organizes the pairs and provides access to the
“root” pairing, which is the terminal pairing (i.e. “championship” or last
round or whatever pairing from which neither <a href="Team.html">Team</a>
advances) and also provides the number of rounds of pairings. The number of
rounds is the maximum depth of the binary tree.</p>

<p>Note that there might be more than one <a href="Bracket.html">Bracket</a>
for a <a href="Bracketgrouping.html">Bracketgrouping</a>.</p>

<p>Attributes are:</p>
<dl class="rdoc-list label-list"><dt>pairings
<dd>
<p>Array of all <a href="Bracketpairing.html">Bracketpairing</a> objects in
this <a href="Bracket.html">Bracket</a></p>
</dd><dt>terminalpairing
<dd>
<p>“root” of the “tree”</p>
</dd></dl>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-pairings" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">pairings</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-terminalpairing" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">terminalpairing</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-all_for" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">all_for</span><span
            class="method-args">(bgrouping)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Each <a href="Bracket.html">Bracket</a> is instantiated by a controller via
this class method. This method first finds all terminal pairings for the
the given <a href="Bracketgrouping.html">Bracketgrouping</a>, and then
creates a <a href="Bracket.html">Bracket</a> for each one.</p>
          
          

          
          <div class="method-source-code" id="all_for-source">
            <pre><span class="ruby-comment"># File lib/bracket.rb, line 25</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">Bracket</span>.<span class="ruby-identifier">all_for</span>(<span class="ruby-identifier">bgrouping</span>)
   <span class="ruby-identifier">bracketcontests</span> = <span class="ruby-constant">Bracketcontest</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">bracketgrouping</span><span class="ruby-operator">:</span> <span class="ruby-identifier">bgrouping</span>)
   <span class="ruby-identifier">bracketcontestants</span> = (<span class="ruby-identifier">bracketcontests</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bc</span><span class="ruby-operator">|</span><span class="ruby-identifier">bc</span>.<span class="ruby-identifier">homecontestant</span>})<span class="ruby-operator">+</span>
                          (<span class="ruby-identifier">bracketcontests</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bc</span><span class="ruby-operator">|</span><span class="ruby-identifier">bc</span>.<span class="ruby-identifier">awaycontestant</span>})
   <span class="ruby-identifier">priorcontests</span> = <span class="ruby-identifier">bracketcontestants</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bc</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bc</span>.<span class="ruby-identifier">priorcontest</span>()}.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">bc</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bc</span>.<span class="ruby-identifier">priorcontest</span>()}
   <span class="ruby-identifier">terminalcontests</span> = <span class="ruby-identifier">bracketcontests</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">priorcontests</span>
   <span class="ruby-identifier">terminalcontests</span>.<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">tc</span><span class="ruby-operator">|</span> <span class="ruby-constant">Bracket</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">tc</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(bcontest)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The instantiation of a <a href="Bracket.html">Bracket</a> begins with the
terminal (“root”) pairing and grabs each prior <a
href="Bracketcontest.html">Bracketcontest</a> within the <a
href="Bracketgrouping.html">Bracketgrouping</a>, where a prior <a
href="Bracketcontest.html">Bracketcontest</a> is defined as one whose
winner moves on to this the currently considered pairing.</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/bracket.rb, line 38</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">bcontest</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pairings</span> = []
  <span class="ruby-comment">#self.numrounds = 1</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">terminalpairing</span> = <span class="ruby-constant">Bracketpairing</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">bcontest</span>)
  <span class="ruby-identifier">nr</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">numrounds</span>()
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pairings</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">roundnum</span> = <span class="ruby-identifier">nr</span><span class="ruby-operator">+</span><span class="ruby-value">1</span><span class="ruby-operator">-</span><span class="ruby-identifier">p</span>.<span class="ruby-identifier">roundnum</span>}
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-numrounds" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">numrounds</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>During construction of the collection of pairings, the round numbers start
with the “root”, or terminalpairing, at 1. After construction, the round
numbers are all adjusted so that the most extreme leaf is at 1 and the
terminal pairing is at the depth of the tree. This method returns the
maximum round number found,  so it works both before adjustment and after
adjustment.</p>
          
          

          
          <div class="method-source-code" id="numrounds-source">
            <pre><span class="ruby-comment"># File lib/bracket.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">numrounds</span>()
  <span class="ruby-ivar">@numrounds</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pairings</span>.<span class="ruby-identifier">max_by</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">roundnum</span>}.<span class="ruby-identifier">roundnum</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

